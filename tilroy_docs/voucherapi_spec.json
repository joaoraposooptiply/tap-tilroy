{
  "openapi": "3.0.0",
  "info": {
    "title": "VoucherAPI",
    "description": "API to expose the voucher-service and sale-credit-service",
    "version": "2.8.0"
  },
  "paths": {
    "/budget/{customerSourceId}/balance": {
      "get": {
        "summary": "get budget balance",
        "description": "",
        "tags": [
          "voucher"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/customerSourceIdPath"
          },
          {
            "$ref": "#/components/parameters/shop"
          }
        ],
        "responses": {
          "200": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/budgetBalance"
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request"
          },
          "500": {
            "description": "internal (unexpected) error"
          }
        }
      }
    },
    "/linkcustomer": {
      "post": {
        "summary": "Link customer to voucher",
        "description": "Link a customerId to an existing voucher via reference. Pass the force query parameter to ignore validation of an existing customer on a voucher.",
        "tags": [
          "voucher"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/force"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LinkCustomer"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "ok"
          },
          "400": {
            "description": "bad request"
          },
          "404": {
            "description": "(voucher) not found"
          },
          "409": {
            "description": "voucher already has a linked customer"
          },
          "500": {
            "description": "internal (unexpected) error"
          }
        }
      }
    },
    "/v2/vouchers": {
      "post": {
        "summary": "Create a voucher",
        "description": "Use this endpoint to create a voucher. \n<p>Depending on the provided options a barcode/webcode will be generated.\n<p>If an barcode is provided that is already used, then the existing voucher will be updated!\n",
        "tags": [
          "voucher"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VoucherV2Body"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoucherV2"
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "search vouchers by barcode or customer",
        "description": "Use this endpoint to search vouchers by barcode or customer",
        "tags": [
          "voucher"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          },
          {
            "$ref": "#/components/parameters/queryBarcode"
          },
          {
            "$ref": "#/components/parameters/queryWebcode"
          },
          {
            "$ref": "#/components/parameters/queryCustomerId"
          },
          {
            "$ref": "#/components/parameters/queryCustomerSourceId"
          },
          {
            "$ref": "#/components/parameters/queryType"
          },
          {
            "$ref": "#/components/parameters/hasOpenAmount"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/count"
          }
        ],
        "responses": {
          "200": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/VoucherV2"
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/v2/vouchers/{voucherId}": {
      "get": {
        "summary": "Get a voucher",
        "description": "Use this endpoint to get a voucher",
        "tags": [
          "voucher"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          },
          {
            "$ref": "#/components/parameters/pathVoucherId"
          }
        ],
        "responses": {
          "200": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoucherV2"
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/v2/vouchers/createloyalty": {
      "post": {
        "summary": "create loyalty voucher",
        "description": "Endpoint to create loyalty voucher.\n",
        "tags": [
          "voucher"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoyaltyVoucherPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "ok"
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/v2/voucherusage": {
      "get": {
        "summary": "Get all usage for a voucher",
        "description": "Use this endpoint to get all usage for a voucher",
        "tags": [
          "voucher"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          },
          {
            "$ref": "#/components/parameters/queryVoucherId"
          },
          {
            "$ref": "#/components/parameters/queryBarcode"
          }
        ],
        "responses": {
          "200": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoucherUsage"
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/vouchers/amounts": {
      "post": {
        "summary": "Add a used amout to a voucher",
        "description": "Use this endpoint to add used amounts to a voucher",
        "tags": [
          "amounts"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          },
          {
            "$ref": "#/components/parameters/pathVoucherId"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AmountsV2Create"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AmountsV2"
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/loyalty/points": {
      "post": {
        "summary": "Add points for a customer",
        "description": "Use this endpoint to add loyalty points for a customer (in development)",
        "tags": [
          "loyalty"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoyaltyPoints"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoyaltyPoints"
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "Get a customers loyalty points history (deprecated)",
        "description": "Use this endpoint to get all (active) loyalty points changes of a customer (deprecated)",
        "tags": [
          "loyalty"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          },
          {
            "$ref": "#/components/parameters/customerIdQuery"
          },
          {
            "$ref": "#/components/parameters/customerSourceIdQuery"
          },
          {
            "$ref": "#/components/parameters/expired"
          },
          {
            "$ref": "#/components/parameters/page"
          },
          {
            "$ref": "#/components/parameters/count"
          },
          {
            "$ref": "#/components/parameters/sort"
          }
        ],
        "responses": {
          "200": {
            "description": "ok",
            "headers": {
              "Link": {
                "description": "csv of first/prev/page/next/last links.",
                "schema": {
                  "type": "string"
                }
              },
              "Link-JSON": {
                "description": "JSON version of the Link header.",
                "schema": {
                  "type": "string"
                }
              },
              "X-Paging-CurrentPage": {
                "description": "number of the current page.",
                "schema": {
                  "type": "number"
                }
              },
              "X-Paging-ItemCount": {
                "description": "total number of items over all pages.",
                "schema": {
                  "type": "number"
                }
              },
              "X-Paging-ItemsPerPage": {
                "description": "number of max items returned per page.",
                "schema": {
                  "type": "number"
                }
              },
              "X-Paging-PageCount": {
                "description": "total number of pages.",
                "schema": {
                  "type": "number"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LoyaltyPoints"
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/v2/loyalty/points": {
      "get": {
        "summary": "Get a customers loyalty points history",
        "description": "Use this endpoint to get all (active) loyalty points changes of a customer",
        "tags": [
          "loyalty"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          },
          {
            "$ref": "#/components/parameters/customerIdQuery"
          },
          {
            "$ref": "#/components/parameters/customerSourceIdQuery"
          },
          {
            "$ref": "#/components/parameters/queryDateFrom"
          }
        ],
        "responses": {
          "200": {
            "description": "ok",
            "headers": {
              "Link": {
                "description": "csv of first/prev/page/next/last links.",
                "schema": {
                  "type": "string"
                }
              },
              "Link-JSON": {
                "description": "JSON version of the Link header.",
                "schema": {
                  "type": "string"
                }
              },
              "X-Paging-CurrentPage": {
                "description": "number of the current page.",
                "schema": {
                  "type": "number"
                }
              },
              "X-Paging-ItemCount": {
                "description": "total number of items over all pages.",
                "schema": {
                  "type": "number"
                }
              },
              "X-Paging-ItemsPerPage": {
                "description": "number of max items returned per page.",
                "schema": {
                  "type": "number"
                }
              },
              "X-Paging-PageCount": {
                "description": "total number of pages.",
                "schema": {
                  "type": "number"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LoyaltyPointsV2"
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/loyalty/balance": {
      "get": {
        "summary": "Get a customers current loyalty points balance",
        "description": "Use this endpoint to get the current balance of all active loyalty points of a customer (in development)",
        "tags": [
          "loyalty"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          },
          {
            "$ref": "#/components/parameters/customerIdQuery"
          },
          {
            "$ref": "#/components/parameters/customerSourceIdQuery"
          },
          {
            "$ref": "#/components/parameters/shopIdQuery"
          },
          {
            "$ref": "#/components/parameters/shopNumberQuery"
          }
        ],
        "responses": {
          "200": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoyaltyBalance"
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/loyalty/redeem": {
      "post": {
        "summary": "Redeem points for a customer",
        "description": "Use this endpoint to redeem points for a customer",
        "tags": [
          "loyalty"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/headerTilroyApiKey"
          },
          {
            "$ref": "#/components/parameters/headerXApiKey"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RedeemBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "ok",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LoyaltyPoints"
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "(property) not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "500": {
            "description": "internal (unexpected) error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "https://api.tilroy.com/voucherapi/production"
    }
  ],
  "components": {
    "parameters": {
      "headerTilroyApiKey": {
        "name": "Tilroy-Api-Key",
        "in": "header",
        "required": true,
        "description": "API key to identify and validate the tenant",
        "schema": {
          "type": "string"
        }
      },
      "headerXApiKey": {
        "name": "x-api-key",
        "in": "header",
        "required": true,
        "description": "API key of AWS",
        "schema": {
          "type": "string"
        }
      },
      "customerSourceIdPath": {
        "name": "customerSourceId",
        "in": "path",
        "description": "External customer id",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "reference": {
        "name": "reference",
        "in": "path",
        "description": "voucher-reference",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "pathVoucherId": {
        "name": "voucherId",
        "in": "path",
        "description": "voucherId",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "customerSourceIdQuery": {
        "name": "customerSourceId",
        "in": "query",
        "description": "External customer id",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "customerIdQuery": {
        "name": "customerId",
        "in": "query",
        "description": "Tilroy customer id",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "force": {
        "name": "force",
        "in": "query",
        "description": "force processing",
        "required": false,
        "schema": {
          "type": "boolean"
        }
      },
      "shop": {
        "name": "shop",
        "in": "query",
        "description": "filter on shop of salecredit",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "shopIdQuery": {
        "name": "shopId",
        "in": "query",
        "description": "filter on shop id of salecredit",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "shopNumberQuery": {
        "name": "shopNumber",
        "in": "query",
        "description": "filter on shop id of salecredit",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "type": {
        "name": "type",
        "in": "query",
        "description": "filter on type",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "queryBarcode": {
        "name": "barcode",
        "in": "query",
        "description": "filter on barcode",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "queryVoucherId": {
        "name": "voucherId",
        "in": "query",
        "description": "filter on voucher id",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "queryWebcode": {
        "name": "webcode",
        "in": "query",
        "description": "filter on webcode (barcode is also required)",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "queryCustomerId": {
        "name": "customerId",
        "in": "query",
        "description": "filter on tilroyId of a customer",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "queryCustomerSourceId": {
        "name": "customerSourceId",
        "in": "query",
        "description": "filter on sourceId of a customer",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "queryType": {
        "name": "type",
        "in": "query",
        "description": "filter on 1 or more types (comma separated)",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "hasOpenAmount": {
        "name": "hasOpenAmount",
        "in": "query",
        "required": false,
        "description": "filter amountOpen > 0 (or negative) when true, amountOpen = 0 when false, all when omitted",
        "schema": {
          "type": "boolean"
        }
      },
      "expired": {
        "name": "expired",
        "in": "query",
        "description": "Show expired items (default: false)",
        "required": false,
        "schema": {
          "type": "boolean"
        }
      },
      "queryDateFrom": {
        "name": "dateFrom",
        "in": "query",
        "description": "search after or on this date (ISO format)",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "page": {
        "name": "page",
        "in": "query",
        "description": "page number",
        "required": false,
        "schema": {
          "type": "number"
        }
      },
      "count": {
        "name": "count",
        "in": "query",
        "description": "number of wanted items on the page",
        "required": false,
        "schema": {
          "type": "number"
        }
      },
      "sort": {
        "name": "sort",
        "in": "query",
        "description": "the property (and order) to sort on. <p>example: '-date' <p>current sortable properties are: date, dateExpired, amount <p>only a single property (and order) can be used to sort on",
        "required": false,
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "budgetBalance": {
        "type": "object",
        "properties": {
          "status": {
            "$ref": "#/components/schemas/Status"
          },
          "amount": {
            "type": "number"
          },
          "amountOpen": {
            "type": "number"
          },
          "total": {
            "description": "number of records found",
            "type": "number"
          }
        }
      },
      "LinkCustomer": {
        "type": "object",
        "required": [
          "customer",
          "reference"
        ],
        "properties": {
          "customer": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              }
            }
          },
          "reference": {
            "type": "string"
          },
          "webCode": {
            "type": "string"
          }
        }
      },
      "Voucher": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "barcode": {
            "type": "string"
          },
          "webcode": {
            "type": "string"
          },
          "amount": {
            "type": "number"
          },
          "amountOpen": {
            "type": "number"
          },
          "amountUsed": {
            "type": "number"
          },
          "starDate": {
            "type": "string",
            "format": "isodate"
          },
          "endDate": {
            "type": "string",
            "format": "isodate"
          },
          "activationDate": {
            "type": "string",
            "format": "isodate"
          },
          "type": {
            "type": "string",
            "enum": [
              "creditvoucher",
              "advance",
              "giftvoucher",
              "loyaltyvoucher"
            ]
          },
          "status": {
            "$ref": "#/components/schemas/Status"
          },
          "shopId": {
            "type": "string"
          },
          "buId": {
            "type": "string"
          },
          "legalEntityId": {
            "type": "string"
          },
          "customer": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              }
            }
          }
        }
      },
      "VoucherV2Body": {
        "allOf": [
          {
            "$ref": "#/components/schemas/VoucherV2"
          }
        ],
        "type": "object",
        "properties": {
          "paymentType": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "code": {
                "type": "string"
              }
            }
          }
        }
      },
      "LoyaltyVoucherPayload": {
        "type": "object",
        "properties": {
          "customer": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              }
            }
          },
          "shop": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "number": {
                "type": "string"
              }
            }
          }
        }
      },
      "VoucherV2": {
        "type": "object",
        "required": [
          "barcode",
          "webcode",
          "amounts",
          "type",
          "startDate",
          "endDate",
          "shop"
        ],
        "properties": {
          "tilroyId": {
            "type": "string",
            "description": "this contains the tilroyId of the voucher",
            "example": "123456"
          },
          "barcode": {
            "type": "string",
            "description": "this contains the barcode of the voucher (can be empty, if options.generateBarcode is true)",
            "example": "BACD3698DE01"
          },
          "webcode": {
            "type": "string",
            "description": "this contains the webcode of the voucher (can be empty, if options.generateWebcode is true)",
            "example": "698"
          },
          "amounts": {
            "$ref": "#/components/schemas/AmountsV2"
          },
          "type": {
            "type": "string",
            "enum": [
              "advance",
              "creditvoucher",
              "giftvoucher",
              "loyaltyvoucher",
              "nextsalediscount",
              "voucher"
            ]
          },
          "startDate": {
            "type": "string"
          },
          "endDate": {
            "type": "string"
          },
          "shop": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "number": {
                "type": "number"
              }
            }
          },
          "businessUnit": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "code": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              }
            }
          },
          "legalEntity": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "code": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              }
            }
          },
          "picture": {
            "type": "string"
          },
          "comments": {
            "type": "string"
          },
          "customer": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              }
            }
          },
          "sourceId": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "options": {
            "type": "object",
            "properties": {
              "generateBarcode": {
                "type": "boolean",
                "default": false
              },
              "generateWebcode": {
                "type": "boolean",
                "default": false
              }
            }
          },
          "status": {
            "type": "string",
            "default": "sold",
            "description": "status of the voucher. Use status 'new' to create a new voucher that can be added to a basket.",
            "enum": [
              "sold",
              "new"
            ]
          }
        }
      },
      "AmountsV2": {
        "type": "object",
        "properties": {
          "full": {
            "type": "number"
          },
          "open": {
            "type": "number"
          },
          "used": {
            "type": "number"
          }
        }
      },
      "AmountsV2Create": {
        "type": "object",
        "required": [
          "used"
        ],
        "properties": {
          "used": {
            "type": "number"
          },
          "shop": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "number": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              }
            },
            "description": "shop where the amount is used, only one of the properties is required"
          },
          "voucher": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "barcode": {
                "type": "string"
              }
            },
            "description": "voucher to add the used amount to, only one of the properties is required"
          }
        }
      },
      "VoucherUsage": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "amount": {
              "type": "number"
            },
            "dateUsed": {
              "type": "string",
              "format": "date-time"
            },
            "sale": {
              "type": "object",
              "properties": {
                "tilroyId": {
                  "type": "string"
                }
              }
            },
            "user": {
              "type": "object",
              "properties": {
                "tilroyId": {
                  "type": "string"
                },
                "firstName": {
                  "type": "string"
                },
                "lastName": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                }
              }
            },
            "businessUnit": {
              "type": "object",
              "properties": {
                "tilroyId": {
                  "type": "string"
                },
                "code": {
                  "type": "string"
                },
                "sourceId": {
                  "type": "string"
                }
              }
            },
            "legalEntity": {
              "type": "object",
              "properties": {
                "tilroyId": {
                  "type": "string"
                },
                "code": {
                  "type": "string"
                },
                "sourceId": {
                  "type": "string"
                }
              }
            },
            "shop": {
              "type": "object",
              "properties": {
                "tilroyId": {
                  "type": "string"
                },
                "number": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "sourceId": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "Status": {
        "type": "string",
        "enum": [
          "A",
          "C",
          "N",
          "P",
          "R",
          "S",
          "X"
        ]
      },
      "LoyaltyBalance": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number"
          },
          "points": {
            "type": "number"
          },
          "validUntil": {
            "type": "string",
            "format": "isodate"
          }
        }
      },
      "RedeemBody": {
        "type": "object",
        "required": [
          "customer",
          "amount",
          "points"
        ],
        "properties": {
          "customer": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              },
              "code": {
                "type": "string"
              },
              "email": {
                "type": "string"
              }
            }
          },
          "shop": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "number": {
                "type": "number"
              },
              "sourceId": {
                "type": "string"
              }
            }
          },
          "amount": {
            "type": "number",
            "description": "the amount to redeem, this should be a positive number (either amount or points should be provided)"
          },
          "points": {
            "type": "number",
            "description": "the points to redeem, this should be a positive number (either amount or points should be provided)"
          }
        }
      },
      "LoyaltyPoints": {
        "type": "object",
        "required": [
          "amount",
          "points",
          "date",
          "dateExpired",
          "customer",
          "shop"
        ],
        "properties": {
          "tilroyId": {
            "type": "string"
          },
          "sourceId": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "example": "1760010110870 - RunnersSquad Zwijndrecht - 07/10/2019 - 150\u20ac"
          },
          "amount": {
            "type": "number",
            "description": "either amount or points should be provided"
          },
          "points": {
            "type": "number",
            "description": "either amount or points should be provided"
          },
          "date": {
            "type": "string",
            "format": "isodate"
          },
          "dateExpired": {
            "type": "string",
            "format": "isodate"
          },
          "customer": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              }
            }
          },
          "shop": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "number": {
                "type": "number"
              },
              "sourceId": {
                "type": "string"
              },
              "name": {
                "type": "string"
              }
            }
          },
          "comments": {
            "type": "string"
          }
        }
      },
      "LoyaltyPointsV2": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number"
          },
          "points": {
            "type": "number"
          },
          "customer": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "sourceId": {
                "type": "string"
              }
            }
          },
          "shop": {
            "type": "object",
            "properties": {
              "tilroyId": {
                "type": "string"
              },
              "number": {
                "type": "number"
              },
              "sourceId": {
                "type": "string"
              },
              "name": {
                "type": "string"
              }
            }
          },
          "date": {
            "type": "string",
            "format": "date-time"
          },
          "saleId": {
            "type": "string"
          },
          "tilroyId": {
            "type": "string"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "represents string representation of status code"
          },
          "message": {
            "type": "string",
            "description": "contains information on resource not found"
          }
        },
        "required": [
          "code",
          "message"
        ]
      }
    }
  }
}